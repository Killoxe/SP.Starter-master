# SP.Starter

**Quick start project template**

## Start the project.

#### 1. Set dependancies:

It's faster to use yarn

```
yarn install
```

or npm (bit slower)

```
npm install
```

#### 2. Launch Gulp for development

```
npm start
```

#### 3. Open [`http://localhost:9000/`](http://localhost:9000/)

## Commands

#### Launch the project

```
npm start
```

#### Assemble the project

```
npm run build
```

#### Make a build.zip

```
npm run zip
```

## Project Structure

It's not mandatory but considered effective for many reasons to decompose the UI into separate, less coupled components.

Create components at least for the parts of the UI that appear in multiple places of your project. It can be buttons, common page sections, widgets, sliders and so on.

It is recommended that you will keep your components inside the `src/components/` folder. This starter kit allows you to keep your markup, styles, and JavaScript code for a component in one folder and then to use them in multiple places. Please, see the `src/components/` folder for examples. Notice how different types of components are arranged. Also, It is not absolutely mandatory to include Nunjucks or JS code for a component if you feel that it doesn't make too much sense. For example, when the markup is quite simple or when a component doesn't have JS logic.

## HTML template engine Nunjucks

[Nunjucks](https://mozilla.github.io/nunjucks/) - is a full featured templating engine inspired by jinja2, which helps to create qualified and easy-to-maintain HTML code.

Nunjucks-templates are in `src/templates/`.

Data that can be used in several places should be added to the file `global-data.json`, which is located in the root of the project. After that, you can access it in the templates:

```
<p>Some title: {{ someData[0].title }}</p>
```

The page templates that should be compiled into the `build/` folder are put in the `src/templates/pages` folder

We add custom filters, macros and functions in the corresponding files in `src/templates/lib`.

Inclusions are in `src / templates / parts` with the `_` prefix. For example, `src/ templates/parts/_sidebar.nunj`.

For effective use of the template engine, see the examples in the starter project, as well as [documentation](https://mozilla.github.io/nunjucks/templating.html).

To configure the syntax in the editors (Sublime, Webstorm), download the plugin for the Twig template engine and configure the opening of .nunj files with Twig highlighting by default.

## Webpack Hot Module Replacement

[Webpack HMR] is configured in SP.Starter (https://webpack.js.org/concepts/hot-module-replacement/). By default, when changing a JS file, this module and all its dependencies are replaced.

<b>Important!</b> To work correctly, you need to properly handle the side-effects that your code generates.

For example, if there is code adding a handler to the click event:

`document.body.addEventListener ('click', this.someMethod);`

Then, in the code, you need to add the following instruction for Webpack:

```
// Delete the event handler, so that after repeated execution of the previous code this handler will not be added again.
if (module.hot) {
	module.hot.dispose(() => {
		document.body.removeEventListener('click', this.someMethod);
	});
}
```

Otherwise, a click-on handler will be added with every update generated by the HMR.

You must do the same with changing of the DOM tree:

```
var sideEffectNode = document.createElement ("div");
sideEffectNode.textContent = "Side Effect";
document.body.appendChild (sideEffectNode);
```

Add:

```
// Delete the <div> added to the DOM so after executing the previous code this <div> is not added again.
if (module.hot) {
  module.hot.dispose(function () {
    sideEffectNode.parentNode.removeChild(sideEffectNode);
  });
}
```

## SCSS files structure

The following structure of SCSS files exists in Starter:

```
/styles/
	/lib/			// Libraries and Mixins
	/pages/			// Styles for project pages
		_main.scss	// Styles for the main page
	_constants.scss	// Variables and constants
	_controls.scss	// Styles for controls
	_fonts.scss		// Plug-in fonts
	_global.scss	// Global Blocks Styles
	_layout.scss	// Layout styles
	_reset.scss		// CSS-reset and nulling styles
	styles.scss		// The main file that compiles into styles.css
```

A separate file is created for each page in the `pages` folder. A separate file is created for each component in the `src/components/<components_name>` folder.

All included files must begin with a single underscore (`_`).

## SVG sprites

The ability to create SVG sprites with the help of [gulp-svgstore](https://github.com/w0rm/gulp-svgstore) is configured in the starter project, so it is better to add SVG to the site using the component `icon` in the following way:

```
{{ icon({
    iconName: 'some-vector-image',
    className: 'icon',
    attributes: 'viewBox="0 0 20 20"'
}) }}
```

The properties `className` and` attributes` are optional. The SVG file `some-vector-image.svg` should be in the folder `src/assets/svg/`. Width and height must be set in styles for such element. You can also change fill, stroke, but the element should not have the same attributes (fill and stroke) in the source file `some-vector-image.svg`.

**Please note that when connecting the svg sprite in the component `icon`, the `#icon-` prefix in the path to the sprite is used: `#icon-some-vector-image` (in fact,`some-vector-image.svg` will be used).**

## Raster Sprites

To create a simple sprite of images you need to use a mixin.

```
+s(name)
```

The next mixin for sprite for retina. You need to use 2 images: simple and 2 times bigger. For example: `sp.png` and `sp@2x.png`.

```
+sr(name)
```

Images that are collected in the sprite must be in `.png` format and located in the `assets/images/sprites/` directory.

## Inline of pictures or SVG

<b>Pay attention!</b> Images to be inline should be in the `src/assets/images/inline` directory.

### IN SCSS

The postcss-assets plugin allows you to inline images directly into Base64 (or as code in the case of SVG):

```
background: inline('sp.png')
```

It also allows you to put image sizes:

```
width: width('sp.png')
```

```
height: height('sp.png')
```

```
background-size: size('sp.png')
```

### In Nunjucks Templates

```
<img src={% inline 'image.png' %} alt="Some image" />
```

## Useful links

[Nunjucks syntax](https://mozilla.github.io/nunjucks/templating.html).

[Twitter Bootstrap responsive grid](http://getbootstrap.com/css/#grid).
